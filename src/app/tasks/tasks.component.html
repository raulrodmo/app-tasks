<div class="page-content">
    <app-header></app-header>
    <main class="main">
        <div class="main-content">
            <app-main></app-main>
            <div class="main-top">
                <div class="main-top-content">
                <p class="title">Tarefas</p>
                    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
                            <li class="breadcrumb-item active" aria-current="page">Tarefas</li>
                        </ol>
                    </nav>
                </div>
                <app-button-new-task (click)="resetForm(); toggleNewTaskForm()"></app-button-new-task>
            </div>

            </div>
            <div class="table table-top">
                <div class="table-filter">
                    <select class="form-select project-select" aria-label="Default select example">
                        <option selected>Projetos</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                      </select>
                      <select class="form-select status-select" aria-label="Default select example">
                        <option selected>Status</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                      </select>
                      <select class="form-select priority-select" aria-label="Default select example">
                        <option selected>Todas Prioridades</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                      </select>
                      <select class="form-select period-select" aria-label="Default select example">
                        <option selected>Últimos 30 dias</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                      </select>
                </div>
                <div class="table-content">
                    <table class="table table-hover table-sm ">
                        <thead>
                          <tr>
                            <th scope="col col-task">Tarefa</th>
                            <th scope="col col-priority">Prior.</th>
                            <th scope="col col-project">Projeto</th>
                            <th scope="col col-status">Status</th>
                            <th scope="col col-responsible">Respons.</th>
                            <th scope="col col-Deadline">Deadline</th>
                            <th scope="col col-options"></th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let task of tasks">
                            <td>{{task.name}}</td>
                            <td>{{task.priority}}</td>
                            <td>{{task.project}}</td>
                            <td>{{task.status}}</td>
                            <td>{{task.responsible}}</td>
                            <td>{{task.deadline}}</td>
                            <td class="options">
                              <app-button-delete (click)="removeTask(task)"></app-button-delete>
                              <app-button-view (click)="toggleNewTaskForm()"></app-button-view>
                              <app-button-edit (click)="setTaskEdit(task) ; toggleNewTaskForm()" ></app-button-edit>
                            </td>
                          </tr>
                        </tbody>
                    </table>
                </div>
            </div>
    </main>
    <div class="new-task new-task-desactive">
      <div class="new-task-content">
        <div class="new-task-top">
          <p class="new-task-top-title">Nova tarefa</p>
          <button (click)="resetForm();toggleNewTaskForm()"><i class="bi bi-x-circle"></i>
          </button>
        </div>
        
        <div class="new-task-main">
          <div class="mb-3 new-task-title">
            <label for="exampleFormControlInput1" class="form-label">Título da tarefa</label>
            <input type="text" class="form-control input-new-task-name" id="exampleFormControlInput1" [(ngModel)]="task.name">
          </div>
    
          <div class="mb-3 new-task-details">
            <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" placeholder="Detalhes da tarefa" [(ngModel)]="task.details"></textarea>
          </div>
    
          <div class="deadline-priority">
            <div class="mb-3 input-task-deadline">
              <label for="exampleFormControlInput1" class="form-label">Deadline</label>
              <input type="date" class="form-control" id="exampleFormControlInput1" placeholder="Deadline" [(ngModel)]="task.deadline">
            </div>
            <div class="task-priority">
              <label for="exampleFormControlInput1" class="form-label">Prioridade</label>
              <select id="priorityOptions" class="form-select period-select" aria-label="Default select example" [(ngModel)]="task.priority">
                <option value="alta">Alta</option>
                <option value="media">Média</option>
                <option value="baixa">Baixa</option>
              </select>
            </div>
          </div>

            <div class="task-responsible">
              <label for="exampleFormControlInput1" class="form-label">Responsável</label>
              <input class="form-control" list="responsibleOptions" id="responsibleDataList" [(ngModel)]="task.responsible">
              <datalist id="responsibleOptions">
                <option *ngFor="let task of tasks" value={{task.responsible}}>
              </datalist>
            </div>

            <div class="new-task-status">
              <label for="exampleFormControlInput1" class="form-label">Status</label>
              <select id="priorityOptions" class="form-select period-select" aria-label="Default select example" [(ngModel)]="task.status">
                <option value="to do">ToDo</option>
                <option value="doing">Doing</option>
                <option value="done">Done</option>
              </select>
            </div>
            
            <div class="mb-3 new-task-project">
              <label for="exampleFormControlInput1" class="form-label">Projeto</label>
              <input class="form-control" list="projectOptions" id="projectDataList" [(ngModel)]="task.project">
              <datalist id="projectOptions">
                <option *ngFor="let task of tasks" value={{task.project}}>
              </datalist>
            </div>        
          <div class="custom-file">
            <input type="file" class="custom-file-input" id="customFile">
          </div>
          <div class="actions">
            <app-button-cancel (click)="resetForm() ; toggleNewTaskForm()"></app-button-cancel>
            <app-button-new-task (click)="toggleNewTaskForm() ; addTask(task);"></app-button-new-task>
    </div>
</div>
